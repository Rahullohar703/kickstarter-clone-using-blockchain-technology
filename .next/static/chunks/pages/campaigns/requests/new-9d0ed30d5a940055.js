(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{960:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests/new",function(){return r(3606)}])},3606:function(e,t,r){"use strict";r.r(t);var s=r(4111),n=r(7568),a=r(1438),i=r(2951),u=r(4924),o=r(8029),c=r(460),l=r(7582),d=r(5893),h=r(7294),p=r(5424),Z=r(416),g=r(8156),f=r(967),v=r(4148),j=r(1508),x=r(6215),_=r(3544),m=function(e){(0,o.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;(0,a.Z)(this,r),e=t.apply(this,arguments),(0,u.Z)((0,s.Z)(e),"state",{value:"",description:"",recipient:"",loading:!1,errorMessage:""});var i=(0,s.Z)(e);return(0,u.Z)((0,s.Z)(e),"onSubmit",function(){var e=(0,n.Z)((function(e){var t,r,s,n,a,u,o;return(0,l.__generator)(this,(function(c){switch(c.label){case 0:if(e.preventDefault(),t=(0,v.Z)(i.props.address),r=i.state,s=r.description,n=r.value,a=r.recipient,!j.Z.utils.isAddress(a))return i.setState({errorMessage:"Invalid recipient address"}),[2];i.setState({loading:!0,errorMessage:""}),c.label=1;case 1:return c.trys.push([1,4,,5]),[4,j.Z.eth.getAccounts()];case 2:return u=c.sent(),[4,t.methods.createRequest(s,j.Z.utils.toWei(n,"ether"),a).send({from:u[0]})];case 3:return c.sent(),x.Router.pushRoute("/campaigns/".concat(i.props.address,"/requests")),[3,5];case 4:return o=c.sent(),i.setState({errorMessage:o.message}),[3,5];case 5:return i.setState({loading:!1}),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this;return(0,d.jsxs)(_.Z,{children:[(0,d.jsx)("h3",{children:"Create a Request"}),(0,d.jsxs)(p.Z,{onSubmit:this.onSubmit,error:!!this.state.errorMessage,children:[(0,d.jsxs)(p.Z.Field,{children:[(0,d.jsx)("label",{children:"Description"}),(0,d.jsx)(Z.Z,{value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})]}),(0,d.jsxs)(p.Z.Field,{children:[(0,d.jsx)("label",{children:"Value in Ether"}),(0,d.jsx)(Z.Z,{value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})}})]}),(0,d.jsxs)(p.Z.Field,{children:[(0,d.jsx)("label",{children:"Recipient"}),(0,d.jsx)(Z.Z,{value:this.state.recipient,onChange:function(t){return e.setState({recipient:t.target.value})}})]}),(0,d.jsx)(g.Z,{error:!0,header:"Oops!",content:this.state.errorMessage}),(0,d.jsx)(f.Z,{primary:!0,loading:this.state.loading,children:"Create!"}),(0,d.jsx)(x.Link,{route:"/campaigns/".concat(this.props.address,"/requests"),children:(0,d.jsx)("a",{children:(0,d.jsx)(f.Z,{secondary:!0,children:"Back to requests"})})})]})]})}}],[{key:"getInitialProps",value:function(e){return(0,n.Z)((function(){var t;return(0,l.__generator)(this,(function(r){if(t=e.query.address,!j.Z.utils.isAddress(t))throw new Error("Invalid campaign address");return[2,{address:t}]}))}))()}}]),r}(h.Component);t.default=m}},function(e){e.O(0,[774,844,65,421,888,179],(function(){return t=960,e(e.s=t);var t}));var t=e.O();_N_E=t}]);