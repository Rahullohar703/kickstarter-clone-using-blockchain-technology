(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8216:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return t(2601)}])},2601:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return K}});var n=t(7568),s=t(1438),a=t(2951),l=t(8029),i=t(460),c=t(7582),o=t(5893),d=t(7294),u=t(7462),p=t(3871),h=t(6010),v=t(8459),f=t(8935),m=t(2519),Z=t(2248);function g(e){var r=e.children,t=e.className,n=(0,h.Z)(t),s=(0,f.Z)(g,e),a=(0,m.Z)(g,e);return d.createElement(a,(0,u.Z)({},s,{className:n}),r)}g.handledProps=["as","children","className"],g.defaultProps={as:"tbody"},g.propTypes={};var b=g,x=t(9591),w=t(5150);function j(e){var r=e.active,t=e.children,n=e.className,s=e.collapsing,a=e.content,l=e.disabled,i=e.error,c=e.icon,o=e.negative,p=e.positive,g=e.selectable,b=e.singleLine,x=e.textAlign,G=e.verticalAlign,A=e.warning,N=e.width,k=(0,h.Z)((0,v.lG)(r,"active"),(0,v.lG)(s,"collapsing"),(0,v.lG)(l,"disabled"),(0,v.lG)(i,"error"),(0,v.lG)(o,"negative"),(0,v.lG)(p,"positive"),(0,v.lG)(g,"selectable"),(0,v.lG)(b,"single line"),(0,v.lG)(A,"warning"),(0,v.X4)(x),(0,v.Ok)(G),(0,v.H0)(N,"wide"),n),y=(0,f.Z)(j,e),P=(0,m.Z)(j,e);return Z.kK(t)?d.createElement(P,(0,u.Z)({},y,{className:k}),w.Z.create(c),a):d.createElement(P,(0,u.Z)({},y,{className:k}),t)}j.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],j.defaultProps={as:"td"},j.propTypes={},j.create=(0,x.u5)(j,(function(e){return{content:e}}));var G=j;function A(e){var r=e.children,t=e.className,n=e.content,s=e.fullWidth,a=(0,h.Z)((0,v.lG)(s,"full-width"),t),l=(0,f.Z)(A,e),i=(0,m.Z)(A,e);return d.createElement(i,(0,u.Z)({},l,{className:a}),Z.kK(r)?n:r)}A.handledProps=["as","children","className","content","fullWidth"],A.defaultProps={as:"thead"},A.propTypes={};var N=A;function k(e){var r=e.as,t=(0,f.Z)(k,e);return d.createElement(N,(0,u.Z)({},t,{as:r}))}k.handledProps=["as"],k.propTypes={},k.defaultProps={as:"tfoot"};var y=k;function P(e){var r=e.as,t=e.className,n=e.sorted,s=(0,h.Z)((0,v.cD)(n,"sorted"),t),a=(0,f.Z)(P,e);return d.createElement(G,(0,u.Z)({},a,{as:r,className:s}))}P.handledProps=["as","className","sorted"],P.propTypes={},P.defaultProps={as:"th"};var C=P;function R(e){var r=e.active,t=e.cellAs,n=e.cells,s=e.children,a=e.className,l=e.disabled,i=e.error,c=e.negative,o=e.positive,g=e.textAlign,b=e.verticalAlign,x=e.warning,w=(0,h.Z)((0,v.lG)(r,"active"),(0,v.lG)(l,"disabled"),(0,v.lG)(i,"error"),(0,v.lG)(c,"negative"),(0,v.lG)(o,"positive"),(0,v.lG)(x,"warning"),(0,v.X4)(g),(0,v.Ok)(b),a),j=(0,f.Z)(R,e),A=(0,m.Z)(R,e);return Z.kK(s)?d.createElement(A,(0,u.Z)({},j,{className:w}),(0,p.Z)(n,(function(e){return G.create(e,{defaultProps:{as:t}})}))):d.createElement(A,(0,u.Z)({},j,{className:w}),s)}R.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],R.defaultProps={as:"tr",cellAs:"td"},R.propTypes={},R.create=(0,x.u5)(R,(function(e){return{cells:e}}));var E=R;function _(e){var r=e.attached,t=e.basic,n=e.celled,s=e.children,a=e.className,l=e.collapsing,i=e.color,c=e.columns,o=e.compact,g=e.definition,x=e.fixed,w=e.footerRow,j=e.headerRow,G=e.headerRows,A=e.inverted,k=e.padded,P=e.renderBodyRow,C=e.selectable,R=e.singleLine,q=e.size,T=e.sortable,z=e.stackable,B=e.striped,F=e.structured,H=e.tableData,I=e.textAlign,O=e.unstackable,D=e.verticalAlign,L=(0,h.Z)("ui",i,q,(0,v.lG)(n,"celled"),(0,v.lG)(l,"collapsing"),(0,v.lG)(g,"definition"),(0,v.lG)(x,"fixed"),(0,v.lG)(A,"inverted"),(0,v.lG)(C,"selectable"),(0,v.lG)(R,"single line"),(0,v.lG)(T,"sortable"),(0,v.lG)(z,"stackable"),(0,v.lG)(B,"striped"),(0,v.lG)(F,"structured"),(0,v.lG)(O,"unstackable"),(0,v.sU)(r,"attached"),(0,v.sU)(t,"basic"),(0,v.sU)(o,"compact"),(0,v.sU)(k,"padded"),(0,v.X4)(I),(0,v.Ok)(D),(0,v.H0)(c,"column"),"table",a),X=(0,f.Z)(_,e),K=(0,m.Z)(_,e);if(!Z.kK(s))return d.createElement(K,(0,u.Z)({},X,{className:L}),s);var U={defaultProps:{cellAs:"th"}},W=(j||G)&&d.createElement(N,null,E.create(j,U),(0,p.Z)(G,(function(e){return E.create(e,U)})));return d.createElement(K,(0,u.Z)({},X,{className:L}),W,d.createElement(b,null,P&&(0,p.Z)(H,(function(e,r){return E.create(P(e,r))}))),w&&d.createElement(y,null,E.create(w)))}_.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],_.defaultProps={as:"table"},_.propTypes={},_.Body=b,_.Cell=G,_.Footer=y,_.Header=N,_.HeaderCell=C,_.Row=E;var q=_,T=t(967),z=t(6215),B=t(3544),F=t(4148),H=t(4111),I=t(4924),O=t(1508),D=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){var e;(0,s.Z)(this,t),e=r.apply(this,arguments);var a=(0,H.Z)(e);(0,I.Z)((0,H.Z)(e),"onApprove",(0,n.Z)((function(){var e,r;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return e=(0,F.Z)(a.props.address),[4,O.Z.eth.getAccounts()];case 1:return r=t.sent(),[4,e.methods.approveRequest(a.props.id).send({from:r[0]})];case 2:return t.sent(),[2]}}))})));var l=(0,H.Z)(e);return(0,I.Z)((0,H.Z)(e),"onFinalize",(0,n.Z)((function(){var e,r;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return e=(0,F.Z)(l.props.address),[4,O.Z.eth.getAccounts()];case 1:return r=t.sent(),[4,e.methods.finalizeRequest(l.props.id).send({from:r[0]})];case 2:return t.sent(),[2]}}))}))),e}return(0,a.Z)(t,[{key:"render",value:function(){var e=q.Row,r=q.Cell,t=this.props,n=t.id,s=t.request,a=t.approversCount,l=BigInt(s.approvalCount),i=BigInt(a),c=l>i/2n;return(0,o.jsxs)(e,{disabled:s.complete,positive:c&&!s.complete,children:[(0,o.jsx)(r,{children:n}),(0,o.jsx)(r,{children:s.description}),(0,o.jsx)(r,{children:O.Z.utils.fromWei(s.value,"ether")}),(0,o.jsx)(r,{children:s.recipient}),(0,o.jsx)(r,{children:"".concat(l,"/").concat(i)}),(0,o.jsx)(r,{children:s.complete?null:(0,o.jsx)(T.Z,{color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),(0,o.jsx)(r,{children:s.complete?null:(0,o.jsx)(T.Z,{color:"teal",basic:!0,onClick:this.onFinalize,children:"Finalize"})})]})}}]),t}(d.Component),L=D,X=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){return(0,s.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(r,t){return(0,o.jsx)(L,{id:t,request:r,address:e.props.address,approversCount:e.props.approversCount},t)}))}},{key:"render",value:function(){var e=q.Header,r=q.Body,t=q.HeaderCell,n=q.Row;return(0,o.jsxs)(B.Z,{children:[(0,o.jsx)("h3",{children:"Requests"}),(0,o.jsx)(z.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,o.jsx)("a",{children:(0,o.jsx)(T.Z,{primary:!0,floated:"right",style:{marginBottom:10},children:"Add Request"})})}),(0,o.jsxs)(q,{children:[(0,o.jsx)(e,{children:(0,o.jsxs)(n,{children:[(0,o.jsx)(t,{children:"ID"}),(0,o.jsx)(t,{children:"Description"}),(0,o.jsx)(t,{children:"Amount"}),(0,o.jsx)(t,{children:"Recipient"}),(0,o.jsx)(t,{children:"Approval"}),(0,o.jsx)(t,{children:"Approve"}),(0,o.jsx)(t,{children:"Finalize"})]})}),(0,o.jsx)(r,{children:this.renderRows()})]}),(0,o.jsxs)("div",{children:["Found ",parseInt(this.props.requestCount)," requests."]})]})}}],[{key:"getInitialProps",value:function(e){return(0,n.Z)((function(){var r,t,n,s,a;return(0,c.__generator)(this,(function(l){switch(l.label){case 0:return r=e.query.address,[4,(t=(0,F.Z)(r)).methods.getRequestsCount().call()];case 1:return n=l.sent(),[4,t.methods.approversCount().call()];case 2:return s=l.sent(),[4,Promise.all(Array(parseInt(n)).fill().map((function(e,r){return t.methods.requests(r).call()})))];case 3:return a=l.sent(),[2,{address:r,requests:a,requestCount:n,approversCount:s}]}}))}))()}}]),t}(d.Component),K=X},4924:function(e,r,t){"use strict";function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,{Z:function(){return n}})}},function(e){e.O(0,[774,844,421,888,179],(function(){return r=8216,e(e.s=r);var r}));var r=e.O();_N_E=r}]);